datadog:
  apiKey:
    valueFrom:
      secretKeyRef:
        name: datadog-secret
        key: api-key
  appKey:
    valueFrom:
      secretKeyRef:
        name: datadog-secret
        key: app-key
  site: "app.datadoghq.com"

  logs:
    enabled: true
    containerCollectAll: true

  apm:
    enabled: true
    portEnabled: false
    env: "production"

  dogstatsd:
    enabled: true
    nonLocalTraffic: true

  agent:
    image:
      repository: "gcr.io/datadoghq/agent"
      tag: "7.39.1"
    env:
      - name: DD_LOGS_INJECTION
        value: "true"
      - name: DD_APM_ENABLED
        value: "true"
    volumeMounts:
      - name: datadog-config
        mountPath: /etc/datadog-agent/conf.d/python.d
      - name: allowed-log-path
        mountPath: /var/log/datadog
    volumes:
      - name: datadog-config
        configMap:
          name: datadog-config
      - name: allowed-log-path
        emptyDir: {}  # Use emptyDir instead of hostPath

  daemonset:
    useHostPID: false
    useHostPort: false

  agents:
    trace:
      enabled: true
      port: 8126  # Ensure this port is not bound to the host
    process:
      enabled: true
      port: 8126  # Ensure this port is not bound to the host
